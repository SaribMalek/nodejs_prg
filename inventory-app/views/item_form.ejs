<%- include('partials/header') %>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h3><%= item ? 'Edit Item' : 'Add Item' %></h3>
  <a class="btn btn-sm btn-secondary" href="/items">Back to items</a>
</div>

<form action="<%= item ? ('/items/edit/' + item.id) : '/items/add' %>" method="POST" class="row g-3">
  <div class="col-md-6">
    <label class="form-label">Name</label>
    <input name="name" value="<%= item ? item.name : '' %>" class="form-control" required>
  </div>

  <div class="col-md-6">
    <label class="form-label">SKU</label>
    <input name="sku" value="<%= item ? item.sku : '' %>" class="form-control">
  </div>

  <div class="col-md-4">
    <label class="form-label">Category</label>
    <input name="category" value="<%= item ? item.category : '' %>" class="form-control">
  </div>

  <div class="col-md-4">
    <label class="form-label">Price</label>
    <input name="price" value="<%= item ? item.price : '' %>" class="form-control" type="number" step="0.01" min="0">
  </div>

  <div class="col-md-4">
    <label class="form-label">Stock</label>
    <input name="stock" value="<%= item ? item.stock : 0 %>" class="form-control" type="number" min="0">
  </div>

  <div class="col-md-6">
    <label class="form-label">Supplier</label>
    <select name="supplier_id" class="form-select">
      <option value="">-- None --</option>
      <% suppliers.forEach(s => { %>
        <option value="<%= s.id %>" <%= item && item.supplier_id==s.id ? 'selected' : '' %>><%= s.name %></option>
      <% }) %>
    </select>
  </div>

  <div class="col-12">
    <button class="btn btn-primary"><%= item ? 'Update Item' : 'Add Item' %></button>
  </div>
</form>

<%- include('partials/footer') %>
